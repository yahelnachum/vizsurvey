(this.webpackJsonpvizsurvey=this.webpackJsonpvizsurvey||[]).push([[0],{117:function(t){t.exports=JSON.parse('{"a":"1.0.0"}')},231:function(t,e){},232:function(t,e,n){},233:function(t,e,n){},241:function(t,e,n){"use strict";n.r(e);var i=n(0),r=n.n(i),c=n(36),a=n.n(c),s=n(18),o=n(49),u=n(1),l=n.n(u),d=n(4),b=n(20),j=n(120),h=n(88),m=atob("Z2hwX2RsSG54M3JkNHB2Z0puQmp2OUdiYzJVdkFzNDRzbTBJMlVGTQo="),p="d2d5617ce3c6b4436ec781854ba10341",f="Unitialized",O="Earlier",x="Later",_="Unitialized",v="Fetching",g="Fetched",y="Complete",w="Error",q=Object(o.b)("survey/getQuestions",function(){var t=Object(d.a)(l.a.mark((function t(e){var n,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=+e,t.next=3,Object(b.c)("https://gist.githubusercontent.com/pcordone/f8095509f669e2a3ac98bbfa586d16d9/raw/");case 3:return(n=t.sent).forEach((function(t){t.question_set_id=+t.question_set_id,t.position=+t.position,t.amount_earlier=+t.amount_earlier,t.time_earlier=+t.time_earlier,t.amount_later=+t.amount_later,t.time_later=+t.time_later,t.choice=f,t.answer_time=void 0,t.participant_id=void 0})),i=n.filter((function(t){return t.question_set_id===e})),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),S=Object(o.b)("survey/writeAnswers",function(){var t=Object(d.a)(l.a.mark((function t(e,n){var i,r,c,a,s,o,u,d,b,f;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.getState,r=i(),c=new j.a({userAgent:"thesis_answers/v1.0",auth:m}),a="PATCH /gists/".concat(p),s=h.DateTime.now().toFormat("yyyy-MM-dd-H-mm-ss-SSS-ZZZZ"),o={},e="".concat(e),o["answers-subject-".concat(r.questions.participant_id,"-").concat(s,".csv")]={content:e},u="Answer results for participant ".concat(r.questions.participant_id," at ").concat(s),console.log("submitting answers for "+u),d={gist_id:p,description:u,files:o},t.next=13,c.request(a,d);case 13:b=t.sent,f=b.status,console.log("answers submitted with status of "+f);case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),k=Object(o.c)({name:"questions",initialState:{questions:[],currentQuestion:0,question_set_id:null,participant_id:null,status:"Unitialized",error:null},reducers:{setParticipant:function(t,e){null===t.participant_id&&null!==e.payload&&(t.participant_id=e.payload)},setQuestionSet:function(t,e){null===t.questionSetId&&null!==e.payload&&(t.question_set_id=e.payload)},answer:function(t,e){t.questions[t.currentQuestion].choice=e.payload,t.questions[t.currentQuestion].answer_time=h.DateTime.now().toFormat("MM/dd/yyyy H:mm:ss:SSS ZZZZ"),t.questions[t.currentQuestion].participant_id=t.participant_id,t.currentQuestion===t.questions.length-1?t.status=y:t.currentQuestion+=1},nextQuestion:function(t){t.questions.currentQuestion+=t.currentQuestion<t.questions.length?1:0},previousQuestion:function(t){t.currentQuestion-=t.currentQuestion>0?1:0}},extraReducers:function(t){t.addCase(q.pending,(function(t){t.status===_&&(t.status=v)})).addCase(q.fulfilled,(function(t,e){t.questions=e.payload,t.currentQuestion=0,t.status=g})).addCase(q.rejected,(function(t,e){t.status===g&&(t.status=w,t.error=e.error)}))}}),Q=function(t){return Object(b.e)(t.questions.questions,(function(t){return t.time_later}))},z=function(t){return t.questions.questions},F=function(t){return t.questions.questions[t.questions.currentQuestion]},N=function(t){return t.questions.status},T=k.actions,R=T.answer,Z=(T.nextQuestion,T.previousQuestion,T.setParticipant),A=T.setQuestionSet,C=k.reducer,E=Object(o.a)({reducer:{questions:C}}),M=(n(232),n(48)),P=n(10),L=n(249),V=n(250),B=(n(233),n(246)),D=n(247),J=n(248),U=n(50),I=n(245),H=n(2);var G=function(){var t=Object(s.b)(),e=Object(s.c)(F),n=Object(s.c)(N);function i(){return"$".concat(e.amount_earlier," ").concat(0===(t=e.time_earlier)?"today":"in ".concat(t," weeks"));var t}function r(){return"$".concat(e.amount_later," in ").concat(e.time_later," weeks")}var c=Object(H.jsx)(U.d,{initialValues:{choice:f},validate:function(t){var e={};return t.choice&&t.choice!==f||(e.choice="Please choose a selection to continue."),e},onSubmit:function(e,n){var i=n.setSubmitting,r=n.resetForm;setTimeout((function(){t(R(e.choice)),i(!1),r()}),400)},children:function(t){var e=t.isSubmitting;return Object(H.jsxs)(U.c,{children:[Object(H.jsxs)("div",{role:"group","aria-labelledby":"my-radio-group",className:"radio-choice-label",children:[Object(H.jsx)("h3",{children:"".concat(i()," vs. ").concat(r())}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{children:[Object(H.jsx)(U.b,{type:"radio",name:"choice",value:O}),"\xa0",i()]}),Object(H.jsx)("br",{}),Object(H.jsxs)("label",{children:[Object(H.jsx)(U.b,{type:"radio",name:"choice",value:x}),"\xa0",r()]}),Object(H.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:Object(H.jsx)(U.a,{name:"choice",component:"div"})})]}),Object(H.jsx)(I.a,{type:"submit",disabled:e,children:"Submit"})]})}});return n===y?Object(H.jsx)(P.a,{to:"/thankyou"}):c},$=function(t,e){var n=r.a.useRef();return r.a.useEffect((function(){return t(b.i(n.current)),function(){}}),e),n};var Y=function(t){var e=Object(s.c)(F),n=Object(s.c)(Q),i=t.height,r=t.width,c={top:t.top_margin,right:t.right_margin,bottom:t.bottom_margin,left:t.left_margin},a={height:i,width:r,marginLeft:c.left+"px",marginRight:c.right+"px"},o=Array.from(Array(n+1).keys()),u=o.map((function(t){return t==e.time_earlier?{time:t,amount:e.amount_earlier}:t==e.time_later?{time:t,amount:e.amount_later}:{time:t,amount:0}}));return Object(H.jsxs)("svg",{width:r,height:i,ref:$((function(t){var e=Object(b.g)().domain(o).rangeRound([c.left,r-c.right]),n=[0,Object(b.e)(u,(function(t){return t.amount}))],a=Object(b.h)().domain(n).rangeRound([i-c.bottom,c.top]);t.select(".x-axis").attr("transform","translate(0,".concat(i-c.bottom,")")).call(Object(b.a)(e).tickValues(o).tickSizeOuter(0));var s=Object(b.f)(n[0],n[1],n[1]/5);s.push(n[1]),t.select(".y-axis").attr("transform","translate(".concat(c.left,",0)")).call(Object(b.b)(a).tickValues(s).tickFormat(b.d("$,.2f"))),t.select(".plot-area").attr("fill","steelblue").attr("class","plot-area").selectAll(".bar").data(u).join("rect").attr("class","bar").attr("x",(function(t){return e(t.time)})).attr("width",e.bandwidth()).attr("y",(function(t){return a(t.amount)})).attr("height",(function(t){return a(0)-a(t.amount)}))}),[u]),style:a,children:[Object(H.jsx)("g",{className:"plot-area"}),Object(H.jsx)("g",{className:"x-axis"}),Object(H.jsx)("g",{className:"y-axis"})]})};var W=function(){return Object(H.jsxs)(B.a,{fluid:!0,children:[Object(H.jsx)(D.a,{children:Object(H.jsx)(J.a,{children:Object(H.jsx)(G,{})})}),Object(H.jsx)(D.a,{children:Object(H.jsx)(J.a,{children:Object(H.jsx)(Y,{width:"600",height:"600",top_margin:"20",right_margin:"30",bottom_margin:"30",left_margin:"80"})})})]})},X=n(116),K=n.n(X);function tt(){var t=Object(s.b)(),e=Object(s.c)(N),n=Object(P.g)().search,r=new URLSearchParams(n).get("participant_id"),c=new URLSearchParams(n).get("question_set_id");return t(Z(r)),t(A(c)),Object(i.useEffect)((function(){e===_&&t(q(c))}),[e,t]),Object(H.jsx)("div",{children:e===v&&Object(H.jsx)(K.a,{type:"spinningBubbles",color:"#444"})})}var et=n(117),nt=function(){return Object(H.jsx)("div",{className:"footer",children:Object(H.jsxs)("p",{children:["Version: ",et.a]})})},it=function(){return Object(H.jsx)("div",{children:Object(H.jsx)(M.a,{children:Object(H.jsxs)("div",{className:"App",children:[Object(H.jsxs)(L.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(H.jsx)(L.a.Brand,{as:M.b,to:"/",children:"Viz Survey"}),Object(H.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(H.jsx)(L.a.Collapse,{id:"basic-navbar-nav",children:Object(H.jsx)(V.a,{className:"mr-auto",children:Object(H.jsx)(V.a.Item,{href:"/survey",children:Object(H.jsx)(V.a.Link,{as:M.b,to:"/survey",children:"Survey"})})})})]}),Object(H.jsx)(tt,{}),Object(H.jsxs)(P.d,{children:[Object(H.jsx)(P.b,{exact:!0,path:"/",component:rt}),Object(H.jsx)(P.b,{path:"/survey",component:W}),Object(H.jsx)(P.b,{path:"/thankyou",component:ct}),Object(H.jsx)(P.b,{path:"/*",component:rt})]}),Object(H.jsx)(nt,{className:"footer bg-dark"})]})})})},rt=function(){return Object(H.jsxs)("div",{id:"home-text",children:[Object(H.jsx)("p",{children:"*** TODO: Inert the survey instructions for the subject here ***"}),Object(H.jsx)("p",{children:Object(H.jsx)("a",{href:" https://github.com/pcordone/vizsurvey",children:"Github README.md"})}),Object(H.jsx)("p",{children:Object(H.jsx)("a",{href:"http://localhost:3000/vizsurvey?participant_id=1&question_set_id=2",children:"localhost"})})]})};var ct=function(){var t=Object(s.b)(),e=function(t){var e=t.map((function(t){return"".concat(t.question_set_id,", ").concat(t.position,", ").concat(t.amount_earlier,", ").concat(t.time_earlier,", ").concat(t.amount_later,", ").concat(t.time_later,", ").concat(t.choice,", ").concat(t.answer_time,", ").concat(t.participant_id)}));return["question_set_id,position,amount_earlier,time_earlier,amount_later,time_later,choice,answer_time,participant_id"].concat(e).join("\n")}(Object(s.c)(z));return console.log(e),t(S(e)),Object(H.jsxs)("div",{children:[Object(H.jsx)("p",{children:"Your answers have been submitted. Thank you for taking this survey!"}),"."]})},at=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,251)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,c=e.getLCP,a=e.getTTFB;n(t),i(t),r(t),c(t),a(t)}))};a.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(s.a,{store:E,children:Object(H.jsx)(it,{})})}),document.getElementById("root")),at()}},[[241,1,2]]]);
//# sourceMappingURL=main.ea9e2180.chunk.js.map