(this.webpackJsonpvizsurvey=this.webpackJsonpvizsurvey||[]).push([[0],{151:function(e,t,n){},152:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(20),o=n.n(a),s=n(13),c=n(31),u=n(15),l=n.n(u),h=n(59),d=n(9),b="Unitialized",m="Unitialized",j="Fetching",f="Fetched",x="Error",O=Object(c.b)("survey/getQuestions",Object(h.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.c)("https://gist.githubusercontent.com/pcordone/f8095509f669e2a3ac98bbfa586d16d9/raw/");case 2:return(t=e.sent).forEach((function(e){return e.question_set=+e.question_set,e.position=+e.position,e.amount_earlier=+e.amount_earlier,e.time_earlier=+e.time_earlier,e.amount_later=+e.amount_later,e.time_later=+e.time_later,e.choice=b,t})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))),g=Object(c.c)({name:"questions",initialState:{questions:[],currentQuestion:0,status:"Unitialized",error:null},reducers:{answer:function(e,t){e.questions[e.currentQuestion].choice=t.payload,e.currentQuestion+=e.currentQuestion<e.questions.length-1?1:0},nextQuestion:function(e,t){e.questions.currentQuestion+=e.currentQuestion<e.questions.length-1?1:0},previousQuestion:function(e,t){e.currentQuestion-=e.currentQuestion>0?1:0}},extraReducers:function(e){e.addCase(O.pending,(function(e,t){e.status===m&&(e.status=j)})).addCase(O.fulfilled,(function(e,t){e.questions=t.payload,e.currentQuestion=0,e.status=f})).addCase(O.rejected,(function(e,t){"pending"===e.status&&(e.status=x,e.error=t.error)}))}}),p=function(e){return Object(d.e)(e.questions.questions,(function(e){return e.time_later}))},v=function(e){return Object(d.e)(e.questions.questions,(function(e){return e.amount_earlier>e.amount_later?e.amount_earlier:e.amount_greater}))},y=function(e){return e.questions.questions[e.questions.currentQuestion]},w=function(e){return e.questions.status},q=g.actions,_=q.answer,k=(q.nextQuestion,q.previousQuestion,g.reducer),I=Object(c.a)({reducer:{questions:k}}),Q=(n(151),n(40)),S=n(7),z=n(165),E=n(166),F=(n(152),n(163)),R=n(164),A=n(28),C=n(162),T=n(1);var N=function(){var e=Object(s.b)(),t=Object(s.c)(y);function n(){return"$".concat(t.amount_earlier," ").concat(0===(e=t.time_earlier)?"today":"in ".concat(e," weeks"));var e}function i(){return"$".concat(t.amount_later," in ").concat(t.time_later," weeks")}return Object(T.jsx)(A.d,{initialValues:{choice:t.choice},validate:function(e){var t={};return e.choice&&e.choice!==b||(t.choice="Please choose a selection to continue."),t},onSubmit:function(t,n){var i=n.setSubmitting;setTimeout((function(){e(_(t.choice)),i(!1)}),400)},children:function(e){var t=e.isSubmitting;return Object(T.jsxs)(A.c,{children:[Object(T.jsxs)("div",{role:"group","aria-labelledby":"my-radio-group",className:"radio-choice-label",children:[Object(T.jsx)("h3",{children:"".concat(n()," vs. ").concat(i())}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{children:[Object(T.jsx)(A.b,{type:"radio",name:"choice",value:"{Answer.Earlier}"}),"\xa0",n()]}),Object(T.jsx)("br",{}),Object(T.jsxs)("label",{children:[Object(T.jsx)(A.b,{type:"radio",name:"choice",value:"{Answer.Later}"}),"\xa0",i()]}),Object(T.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:Object(T.jsx)(A.a,{name:"choice",component:"div"})})]}),Object(T.jsx)(C.a,{type:"submit",disabled:t,children:"Submit"})]})}})},L=function(e,t){var n=r.a.useRef();return r.a.useEffect((function(){return e(d.i(n.current)),function(){}}),t),n};var D=function(e){Object(s.b)();var t=Object(s.c)(y),n=Object(s.c)(p),i=(Object(s.c)(v),e.height),r=e.width,a={top:e.top_margin,right:e.right_margin,bottom:e.bottom_margin,left:e.left_margin},o={height:i,width:r,marginLeft:a.left+"px",marginRight:a.right+"px"},c=Array.from(Array(n+1).keys()),u=c.map((function(e){return e==t.time_earlier?{time:e,amount:t.amount_earlier}:e==t.time_later?{time:e,amount:t.amount_later}:{time:e,amount:0}}));return Object(T.jsxs)("svg",{ref:L((function(e){var t=Object(d.g)().domain(c).rangeRound([a.left,r-a.right]).padding(.1),n=[0,Object(d.e)(u,(function(e){return e.amount}))],o=Object(d.h)().domain(n).rangeRound([i-a.bottom,a.top]);e.select(".x-axis").attr("transform","translate(0,".concat(i-a.bottom,")")).call(Object(d.a)(t).tickValues(c).tickSizeOuter(0));var s=Object(d.f)(n[0],n[1],n[1]/5);e.select(".y-axis").attr("transform","translate(".concat(a.left,",0)")).style("color","steelblue").call(Object(d.b)(o).tickValues(s).tickFormat(d.d("$,.2f"))).call((function(e){return e.select(".domain").remove()})),e.select(".plot-area").attr("fill","steelblue").attr("class","plot-area").selectAll(".bar").data(u).join("rect").attr("class","bar").attr("x",(function(e){return t(e.time)})).attr("width",t.bandwidth()).attr("y",(function(e){return o(e.amount)})).attr("height",(function(e){return o(0)-o(e.amount)}))}),[u]),style:o,children:[Object(T.jsx)("g",{className:"plot-area"}),Object(T.jsx)("g",{className:"x-axis"}),Object(T.jsx)("g",{className:"y-axis"})]})};var U=function(){return Object(T.jsxs)(F.a,{fluid:"md",children:[Object(T.jsx)(R.a,{children:Object(T.jsx)(N,{})}),Object(T.jsx)(R.a,{children:Object(T.jsx)(D,{width:"600",height:"600",top_margin:"20",right_margin:"30",bottom_margin:"30",left_margin:"80"})})]})},V=function(){var e=Object(s.b)(),t=Object(s.c)(w);return Object(i.useEffect)((function(){"Unitialized"===t&&e(O())}),[t,e]),Object(T.jsx)("div",{children:Object(T.jsx)(B,{})})},B=function(){return Object(T.jsx)(Q.a,{children:Object(T.jsxs)("div",{children:[Object(T.jsxs)(z.a,{bg:"dark",variant:"dark",expand:"lg",children:[Object(T.jsx)(z.a.Brand,{as:Q.b,to:"/",children:"Viz Survey"}),Object(T.jsx)(z.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(T.jsx)(z.a.Collapse,{id:"basic-navbar-nav",children:Object(T.jsx)(E.a,{className:"mr-auto",children:Object(T.jsx)(E.a.Item,{href:"/survey",children:Object(T.jsx)(E.a.Link,{as:Q.b,to:"/survey",children:"Survey"})})})})]}),Object(T.jsxs)(S.c,{children:[Object(T.jsx)(S.a,{exact:!0,path:"/",component:P}),Object(T.jsx)(S.a,{path:"/survey",component:U}),Object(T.jsx)(S.a,{path:"/*",component:P})]})]})})},P=function(){return Object(T.jsxs)("div",{children:[Object(T.jsx)("p",{children:"*** TODO: Inert the survey instructions for the subject here ***"}),".",Object(T.jsx)("p",{children:"*** TODO: Remove these notes below. They are here during development only. ***"}),"Some open questions about how to design the visualization are captured below. I didn't want to loose track of them, so I put them on this page. For information on how the app is designed and works, see"," ",Object(T.jsx)("a",{href:" https://github.com/pcordone/vizsurvey",children:"Github README.md"}),".",Object(T.jsxs)("ol",{children:[Object(T.jsxs)("li",{children:["Should the time scale be fixed for the question set or not? ",Object(T.jsx)("br",{}),"Right now, I fixed the time scale across the questions to be from 0 to the maximum time for the question set. I thought visually it stopped the bar chart from jumping around between the questions and the range of time values is not so large that it causes any of the charts to become too small along the x axis to render well; however from an experimental point of view, I am not sure if it will bias the subject in some way and I am not sure this is the best choice. It would be easy to drive this as a parameter from the input data for each experiment to turn it on and off so that the time scale could be set to be consistent across the questions or let it format uniquely for each question."]}),Object(T.jsx)("li",{children:"Should the y scale range be fixed for the question set? I did not fix the y range to the same scale between questions since the variation in the amount values is larger and the chart bars with smaller amounts would be too compressed in the y axis too small to be meaninful. I did fix the number of ticks for the y scale to be the same across questions in the set since visually it seems easier to comprehend between quesitons; however I need to fix the algorithm since it ends up with strange interval values if the largest amount in the qustion set is not a divided by 5 to a normal looking v alue. Not sure if that is a good decision. Again, this would be easy to paramaterize through the input data."}),Object(T.jsx)("li",{children:"I need to get the vertical line to draw for the y axis."})]})]})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,167)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),a(e),o(e)}))};o.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(s.a,{store:I,children:Object(T.jsx)(V,{})})}),document.getElementById("root")),$()}},[[160,1,2]]]);
//# sourceMappingURL=main.0f75dc4a.chunk.js.map